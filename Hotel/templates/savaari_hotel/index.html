{% load static %}
{% include "savaari_hotel/hotel_header.html" %}
<style>
	#matchingData>div{
		padding: 4px;
		cursor: pointer;
	}
	#matchingData>div:hover{
		border-left: 3px solid black;
		background-color: #e6e6e6;
		color: #2e2e2e;
	}
</style>
<!-- Main -->
<main class="main-body">
	<section class="home-pg">
		<div class="container">
			<div class="row">
				<div class="col-lg-5 left-sec">
					<form id="edit-pax" action="" method="POST" enctype="multipart/form-data">
						{% csrf_token %}

						<div class="booking-box box-one">
							<h4>Book on India's Largest Hotel Network</h4>
							<div class="hotel-input">
								<div class="flight-group">
								<div class="hotel-group form-group-full">
								  <label for="">Select City, Location  (Worldwide)</label>
								  <input type="text" name="city_name" id="cityNameInput" oninput="findObject()" required>
								  <!-- <input name="city_name" id="departFrom" type="text" list="airport" placeholder="New Delhi" required> -->
								  <div id="matchingData" class="small m-0"></div>
								  <div id="errorMessage" style="color:#f00;display:none;"></div>
								</div>
							</div>
							</div>
							  
							
							<!-- <div class="flexi-stay">
								<span>
									Anytime check-in/check-out
									<i class="la la-info-circle"></i>
								</span>
								<label class="switch">
									<input type="checkbox" id="togBtn">
									<div class="slider round">
										<span class="on">Yes</span>
										<span class="off">No</span>
									</div>
								</label>
							</div> -->
							<div class="hotel-input">
								<div class="hotel-group">
									<label class="two-span" for="">
										<span>Check-in</span>
										<span class="d-none">Time</span>
									</label>
									<div class="with-time">
										<div class="dates">
											<input type="text" id="check_in" class="datepicker" name="check_in_date" required>
											<p class="m-0 small d-none" id="myDate">Friday</p>
										</div>
										<div class="times d-none">
											<span>
												<i class="la la-clock"></i>
												<input type="text" class="js-flatpickr-time" name="date" placeholder="select time">
											</span>
										</div>
									</div>
								</div>
								<div class="hotel-group">
									<label class="two-span" for="">
										<span>Check-out</span>
										<span class="d-none">Time</span>
									</label>
									<div class="with-time">
										<div class="dates">
											<input type="text" id="check_out" class="datepicker" name="check_out_date" required>
											<p class="m-0 small d-none" id="myDate1">Friday</p>
										</div>
										<div class="times d-none">
											<span>
												<i class="la la-clock"></i>
												<input type="text" class="js-flatpickr-time" name="date" placeholder="select time">
											</span>
										</div>
									</div>
								</div>
							</div>
							<div class="person-select">
								<label for="">Traveller and Hotel</label>
								<div class="accordion-one" id="accordiontraveller">
									<h2 id="countData" data-toggle="collapse" data-target="#collapse1"
										aria-expanded="true" aria-controls="collapse1">
										1 Traveller, 1 Room <i class="fa fa-angle-down"></i>
									</h2>
									<div id="collapse1" class="collapse" data-parent="#accordiontraveller">
										<div class="room_list">
											<div class="room-sec">
												<div class="add-person">
													<h5>Room <span class="room-number">1</span>:</h5>
													<div class="person-quantity">
														<span>Adults <small>Above 12 years</small></span>
														<div class="quantity-box">
															<button type="button" class="sub">-</button>
															<input type="number" required class="num" value="1"
																name="no_of_adultes" />
															<button type="button" class="add">+</button>
														</div>
													</div>
													<div class="person-quantity">
														<span>Child <small>Below 12 Years</small></span>
														<div class="quantity-box">
															<button type="button" class="sub">-</button>
															<input type="number" value="0" min="0" max="9"
																name="no_of_child" />
															<button type="button" class="add">+</button>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="add-more-btn">
											<a  class="add_room">Add Room</a>
										</div>
									</div>
								</div>
							</div>
							<div class="text-right mt-4">
								<button class="btn btn-red">
									Search Hotels
									<i class="la la-long-arrow-right la-lg"></i>
								</button>
							</div>
						</div>
					</form>
				</div>

				<div class="col-lg-7 right-sec">
					<!-- Ad Banner -->
					<section class="add-banner">
						<div class="row gap-1">
							<div class="col-12">
								<a href="#" class="add-box">
									<img src="{% static 'hotel/images/ad/1.jpg' %}" alt="">
								</a>
							</div>
							<div class="col-6 pr-1">
								<a href="#" class="add-box">
									<img src="{% static 'hotel/images/ad/2.jpg' %}" alt="">
								</a>
							</div>
							<div class="col-6 pl-1">
								<a href="#" class="add-box">
									<img src="{% static 'hotel/images/ad/3.jpg' %}" alt="">
								</a>
							</div>
						</div>
					</section>

					<!-- Recent Search -->
					<section class="recent-search pt-md-5 pt-3">
						<div class="row gap-2">
							<div class="col-12">
								<div class="heading-one m-0">
									<h3>
										Recent Search
									</h3>
								</div>
							</div>
							<div class="col-md-4">
								<a class="hotel-search-one box-one" href="#">
									<span class="icon-sec">
										<i class="la la-bed"></i>
									</span>
									<span class="close-icon">
										<i class="la la-close"></i>
									</span>
									<h5>Goa</h5>
									<p class="small">Thu, 29 Dec - Sat, 31 Dec</p>
									<div class="price-sec">
										<div class="left-sec">
											<p class="m-0 small">Starting From</p>
											<h4>
												<i class="la la-rupee"></i> 12,600
											</h4>
										</div>
										<div class="right-sec">
											<span>
												<i class="la la-long-arrow-alt-right"></i>
											</span>
										</div>
									</div>
								</a>
							</div>
							<div class="col-md-4">
								<a class="hotel-search-two box-one" href="#">
									<span class="icon-sec">
										<i class="la la-search-location"></i>
									</span>
									<h5>Explore the world</h5>
									<p class="small">Start planning your next adventure</p>
									<div class="btn-sec">
										<span class="btn btn-red">Explore</span>
									</div>
								</a>
							</div>
						</div>
					</section>

					<!-- Discouont -->
					<section class="discount-sec pt-md-5 pt-3">
						<div class="row gap-1-2">
							<div class="col-12">
								<div class="heading-one">
									<h3>
										Hotel Discounts For You
										<a href="offers.html">view all <i class="fa fa-angle-double-right"></i></a>
									</h3>
								</div>
							</div>
							<div class="col-12">
								<div class="owl-carousel owl-theme owl-top-nav" id="discount-slider">
									<div class="item">
										<a class="hotel-discount-one box-one" href="#">
											<img src="{% static 'hotel/images/icon/bank/wb/axis.png' %}" alt="">
											<p class="small">Flat 25% Off</p>
											<h4>Up to <i class="la la-rupee"></i>3,000</h4>
											<p class="small">on Domestic Hotels</p>
											<p class="small text-uppercase">CODE</p>
											<div class="code-sec">
												<span>aufest</span>
												<i class="la la-long-arrow-alt-right"></i>
											</div>
										</a>
									</div>
									<div class="item">
										<a class="hotel-discount-one box-one" href="#">
											<img src="{% static 'hotel/images/icon/bank/wb/canara.png' %}" alt="">
											<p class="small">Flat 25% Off</p>
											<h4>Up to <i class="la la-rupee"></i>3,000</h4>
											<p class="small">on Domestic Hotels</p>
											<p class="small text-uppercase">CODE</p>
											<div class="code-sec">
												<span>aufest</span>
												<i class="la la-long-arrow-alt-right"></i>
											</div>
										</a>
									</div>
									<div class="item">
										<a class="hotel-discount-one box-one" href="#">
											<img src="{% static 'hotel/images/icon/bank/wb/charterd.png' %}" alt="">
											<p class="small">Flat 25% Off</p>
											<h4>Up to <i class="la la-rupee"></i>3,000</h4>
											<p class="small">on Domestic Hotels</p>
											<p class="small text-uppercase">CODE</p>
											<div class="code-sec">
												<span>aufest</span>
												<i class="la la-long-arrow-alt-right"></i>
											</div>
										</a>
									</div>
									<div class="item">
										<a class="hotel-discount-one box-one" href="#">
											<img src="{% static 'hotel/images/icon/bank/wb/city.png' %}" alt="">
											<p class="small">Flat 25% Off</p>
											<h4>Up to <i class="la la-rupee"></i>3,000</h4>
											<p class="small">on Domestic Hotels</p>
											<p class="small text-uppercase">CODE</p>
											<div class="code-sec">
												<span>aufest</span>
												<i class="la la-long-arrow-alt-right"></i>
											</div>
										</a>
									</div>
								</div>
							</div>
						</div>
					</section>

					<!-- Information -->
					<section class="information-sec pt-md-5 pt-3">
						<div class="row gap-1-2">
							<div class="col-12">
								<div class="heading-one">
									<h3>Online Savaari Hotels</h3>
								</div>
							</div>
							<div class="col-12">
								<ul>
									<li>
										<h5>Look for flights and hotels</h5>
										<p>
											Search for exclusive deals on flights and hotels. Find cheap air tickets to
											any destination you like. Choose from its vast
											repository of hotels -
											from budget, mid-range, five-star to niche boutique properties. Widen your
											choices with options like flexi stay, pay directly at
											hotel, and
											guaranteed standard amenities. Extremely efficient and easy.
										</p>
									</li>
									<li>
										<h5>Get a secure flight booking</h5>
										<p>
											Enjoy cancellation protection on domestic flights. Benefit from fare drop
											protection, same day cancellation protection, hold now -
											pay later, on
											international flight bookings. Great filters, fantastic navigation.
										</p>
									</li>
									<li>
										<h5>A holiday to suit every pocket</h5>
										<p>
											Plan a honeymoon, a weekend getaway, or an adventure activity. Select from
											an array of domestic and international destinations
											well-suited to every
											spectrum of traveller. Be it flights, hotels, pre-planned itinerary,
											transport upon arrival/departure or sightseeing - you are
											covered. Attractive
											pricing, well-researched itineraries.
										</p>
									</li>
									<li>
										<h5>Find the best combination, tailor your trip</h5>
										<p>
											Your one-stop-shop to get the best combination of flights, hotels,
											activities, package holidays along with train and bus tickets.
											Travelz's powerful
											search engine lets you zero in on with precision.
										</p>
									</li>
									<li>
										<h5>No need to queue up at the ticketing window of a monument</h5>
										<p>
											Buy tickets to all ASI-protected monuments online. Its hassle-free and saves
											you from waiting in a queue under a scorching sun.
											Imagine gaining a
											breezy entry into the Taj Mahal!
										</p>
									</li>
									<li>
										<h5>New deal every season</h5>
										<p>The onset of the festive season, an upcoming long weekend or a gazetted
											holiday, expect an attractive deal on flights, hotels and
											holidays coming
											your way. From cashback offers to promo code discounts, you are in for a hot
											deal.</p>
									</li>
									<li>
										<h5>Travelz's burgeoning customer base</h5>
										<p>
											Our expert customer service team supports you before, during and after the
											booking. The several million customers since 2006 are
											proof.
										</p>
									</li>
								</ul>
							</div>
						</div>
					</section>
				</div>
			</div>
		</div>
	</section>
</main>

<datalist id="airport">
    {% for i in airport %}
    <option value="{{i.code}}" > {{i.name}}- {{i.city}}</option>
    {% endfor%}
</datalist>
<script  src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" ></script> -->
<script>
	const myDate = document.getElementById('myDate');
	const myDate1 = document.getElementById('myDate1');
	let numberDate = document.getElementById('day');

	let d = new Date();
	let day = d.getDay();
	
	// console.log('d')

	switch (day) {
		case 0:
			day = "Sunday";
			break;
	
		case 1:
			day = "Monday";
			break;

		case 2:
			day = "Tuesday";
			break;

		case 3:
			day = "Wednesday";
			break;

		case 4:
			day = "Thursday";
			break;

		case 5:
			day = "Friday";
			break;

		case 6:
			day = "Saturday";
			break;
	}
	// myDate.innerHTML = day;
	document.getElementById("myDate").innerHTML = day;
	document.getElementById("myDate1").innerHTML = day;
	
	// var myDate = new Date();
	// day = myDate.getDate();
	// console.log(myDate);
</script>

<script>
    var currentPage = 1;
    var pageSize = 10;
    var totalResults = 0;
    var citySelected = false;
    var json_data = [];

    function fetchData() {
        fetch("{% static 'hotel/tripjack_City_hotel_Data2.json' %}")
            .then(response => response.json())
            .then(data => {
                json_data = data;
                totalResults = json_data.length;
            });
    }

    function findObject() {
        var cityName = document.getElementById("cityNameInput").value.toLowerCase();
        var matchingDataContainer = document.getElementById("matchingData");
        matchingDataContainer.innerHTML = '';

        if (!cityName) {
            return;
        }

        var matchingData = json_data.filter(function (item) {
            return item.cityName.toLowerCase().includes(cityName);
        });

        for (var i = (currentPage - 1) * pageSize; i < currentPage * pageSize && i < matchingData.length; i++) {
            var item = matchingData[i];
            var itemNode = document.createElement("div");
            itemNode.innerHTML = item.cityName + ', ' + item.countryName;
            itemNode.addEventListener('click', function () {
                document.getElementById("cityNameInput").value = this.innerHTML;
                citySelected = true;
                matchingDataContainer.innerHTML = '';
            });
            matchingDataContainer.appendChild(itemNode);
        }
    }

    function showNextPage() {
        currentPage++;
        if (currentPage > Math.ceil(totalResults / pageSize)) {
            currentPage = Math.ceil(totalResults / pageSize);
        }
        findObject();
    }

    function showPreviousPage() {
        currentPage--;
        if (currentPage < 1) {
            currentPage = 1;
        }
        findObject();
    }

    function init() {
        fetchData();
    }

    document.getElementById("cityNameInput").addEventListener('input', function () {
        citySelected = false;
        findObject();
    });

    document.querySelector('form').addEventListener('submit', function (event) {
        if (!citySelected) {
            event.preventDefault();
            alert('Please select a city name from the matching list');
        }
    });

    init();
</script>

<script type="text/javascript">
	window.sessionStorage.clear()
	const listItems = [];
	// const filterList = [];
	const india = [];
	const australia = [];
	const brazil = [];
	const united_states = [];
	const united_kingdom = [];
	const otherport = [];
	getData();

	async function getData() {
		const res = await fetch("{% static 'flight/airport_list.json' %}")
		const data = await res.json();
		data.forEach(user => {
			if (user.country === "India") {
				india.push(user);
			} else if (user.country === "Australia") {
				australia.push(user);
			} else if (user.country === "Brazil") {
				brazil.push(user);
			} else if (user.country === "United States") {
				united_states.push(user);
			} else if (user.country === "United Kingdom") {
				united_kingdom.push(user);
			} else {
				otherport.push(user);
			}
		});
		listItems.push(india);
		listItems.push(united_kingdom);
		listItems.push(australia);
		listItems.push(brazil);
		listItems.push(united_states);
		listItems.push(otherport);
	}

	function filterData(searchTerm, num, name) {
		let filterList = [];
		// filterList.splice(0,filterList.length)
		if (searchTerm === "") {
			india.forEach(it => {
				filterList.push(it);
			})
		} else {
			listItems.forEach(item => {
				if (filterList.length <= 20) {     
					item.forEach(it => {
						if ((it.city.toLowerCase().includes(searchTerm.toLowerCase())) || (it.code.toLowerCase().includes(searchTerm.toLowerCase()))) {
							if (!(filterList.includes(it))) {
								filterList.push(it)
							}
						}
					})
				}
			})
		}

		const list = document.querySelector('#list ul');
		document.querySelector('#list ul').innerHTML = '';
		filterList.forEach(e => {
			const li = document.createElement('li');
			
			li.innerHTML = `
				<label class="user-info">
					<h4>${e.city} (${e.code})</h4>
					<p>${e.name}</p>
				</label>
				<input type="radio" value=${e.code} name="airpots">
				<input id="city-value" type='hidden' value=${e.city}>
			`
			li.classList.add(`radio_btn${name}${num}`)
			list.appendChild(li)
			document.querySelectorAll('#list li').forEach(item => {
				item.addEventListener('mouseover', function () {
					this.style.background = '#FAFBFD';
				})
				item.addEventListener('mouseleave', function () {
					this.style.background = 'white';
				})
			})
		})
	}
</script>
<!-- <script>
	const add = document.querySelector(".add");
	sub = document.querySelector(".sub");
	num = document.querySelector(".num");
	
	let i = 1;
	add.addEventListener("click", ()=>{
	i++;
	i = (i > 10) ? "0" + i : i;
	num.innerText = i;
	console.log("i")
	});

	sub.addEventListener("click", ()=>{
	if(i > 1){
	i--;
	i = (i < 10) ? "0" + i : i;
	num.innerText = i;
	}
		
	});
</script> -->
{% include "savaari_hotel/hotel_footer.html" %}